FROM ubuntu:16.04

RUN apt update && apt upgrade -y
RUN apt install -y wget build-essential
RUN apt install python-pydot python-pydot-ng graphviz -y
RUN wget https://repo.continuum.io/miniconda/Miniconda2-4.2.12-Linux-x86_64.sh -O miniconda.sh
RUN bash miniconda.sh -bfp /opt/anaconda
ENV PATH /opt/anaconda/bin:$PATH
COPY ./docker/environment.yml /tmp/environment.yml
RUN conda env update --file /tmp/environment.yml --name root
RUN pip install --upgrade requests graphviz

WORKDIR /workdir
